# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Commands

- **Dev server:** `pnpm dev`
- **Build:** `pnpm build`
- **Lint:** `pnpm lint` (runs `next lint`)
- **Build registry:** `pnpm registry:build` (runs `shadcn build` to generate component JSON files in `public/r/`)
- **Package manager:** pnpm 10.5.0

No test framework is configured.

## Architecture

Slide-CN is a code-first presentation framework. The repo contains both the component library and its marketing website/docs, all in one Next.js 15 (App Router) project.

### Three main concerns

1. **Component library** (`components/ui/slide-cn/`) — The actual slide-cn components distributed via the shadcn registry. Core pieces:
   - `Deck` — root container, manages slide index via React context, handles keyboard/touch navigation
   - `Slide` — individual slide wrapper with swipe gestures, background layer, footer support
   - Layout components: `TitleSlide`, `HorizontalSplit`, `VerticalSplit`, `HeaderWithContent`
   - Content components: `Reveal` (progressive disclosure), `CodeBlock`, `SlideImage`, `Callout`
   - Hooks: `useDeck()` for slide state, `useDeckController()`, `useKeyboardNavigation()`
   - `TitleSlide` uses the compound component pattern (`TitleSlide.Heading`, `TitleSlide.SubHeading`, `TitleSlide.Meta`)

2. **Website** (`web/features/`) — Landing page sections, each in its own feature folder (hero, features, code-example, quickstart, cta, footer, demo). Composed together in `app/page.tsx`.

3. **Documentation** (`content/docs/`) — MDX files rendered by Fumadocs. Layout in `app/docs/`. The `.source/` directory is auto-generated by fumadocs-mdx.

### Registry system

Components are published via the shadcn CLI registry:
- `registry.json` defines all publishable components
- `pnpm registry:build` generates JSON files into `public/r/`
- Users install with: `pnpm dlx shadcn@latest add @slide-cn/slide-cn-default`
- The `slide-cn-default` preset bundles all recommended components

### Demos

Live presentations live in `app/demos/` (route-based) and `web/features/demo/` (embedded in landing page). Each demo is a `<Deck>` with `<Slide>` children.

## Styling

- Tailwind CSS v4 with `@tailwindcss/postcss`
- oklch color tokens defined as CSS variables in `app/globals.css`
- Dark/light mode via next-themes (class strategy)
- `cn()` utility from `lib/utils.ts` (clsx + tailwind-merge)
- Animations via Framer Motion (`motion` package)

## Key path aliases

- `@/*` maps to project root
- `fumadocs-mdx:collections/*` maps to `.source/*`
